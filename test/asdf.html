<div class="row">↵
    <div class="col-sm-4">↵
        <div class="row">↵ <label class="col-sm-12">指定恵管家商户所有门店app版本号(修改记录存入日志)</label>↵</div>
        ↵
        <div class="row">↵
            <form id="form_tenant_edit" class="form-horizontal  col-sm-11" role="form">↵
                <div class="form-group">↵ <label class="col-sm-3 control-label">平台</label>↵
                    <div class="col-sm-8">↵ <select name="app_type" class="form-control">↵
                        <option value="1">恵管家（Android）</option>
                        ↵
                        <option value="2">恵管家（Windows）</option>
                        ↵ </select>↵
                    </div>
                    ↵
                </div>
                ↵
                <div class="form-group">↵ <label class="col-sm-3 control-label">业态</label>↵
                    <div class="col-sm-8">↵ <select name="app_business" class="form-control">↵
                        <option value="1">餐饮</option>
                        ↵
                        <option value="2">零售</option>
                        ↵ </select>↵
                    </div>
                    ↵
                </div>
                ↵
                <div class="form-group">↵ <label class="col-sm-3 control-label">商户信息</label>↵
                    <div class="col-sm-8">↵ <input name="tenant_code" type="text" class="form-control"
                                                   placeholder="商户编号">↵
                    </div>
                    ↵ <span class="star">*</span>↵
                </div>
                ↵
                <div class="form-group">↵ <label class="col-sm-3 control-label">版本号</label>↵
                    <div class="col-sm-8">↵ <input name="version_no" type="text" class="form-control"
                                                   placeholder="置空则清除所有门店版本号">↵
                    </div>
                    ↵
                </div>
                ↵
                <div class="form-group">↵
                    <div class="col-sm-offset-3 col-sm-9">↵ <input id="btn_tenant_edit" type="button" data-value="1"
                                                                   class="btn btn-default" value="修改"/>↵
                    </div>
                    ↵
                </div>
                ↵
            </form>
            ↵
        </div>
        ↵
    </div>
    ↵
    <div class="col-sm-4">↵
        <div class="row">↵ <label class="col-sm-12">查询商户app版本号</label>↵</div>
        ↵
        <div class="row">↵
            <form id="form_tenant_search" class="form-horizontal col-sm-11" role="form">↵
                <div class="form-group">↵ <label class="col-sm-3 control-label">平台</label>↵
                    <div class="col-sm-8">↵ <select id="app_type" name="app_type" class="form-control">↵
                        <option value="1">恵管家</option>
                        ↵
                        <option value="2">恵掌柜</option>
                        ↵ </select>↵
                    </div>
                    ↵
                </div>
                ↵
                <div id="div_tenant_code" class="form-group">↵ <label class="col-sm-3 control-label">商户编号</label>↵
                    <div class="col-sm-8">↵ <input id="tenant_code" name="tenant_code" type="text" class="form-control"
                                                   placeholder="商户编号">↵
                    </div>
                    ↵ <span class="star">*</span>↵
                </div>
                ↵
                <div id="div_branch_code" class="form-group">↵ <label class="col-sm-3 control-label">门店编号</label>↵
                    <div class="col-sm-8">↵ <input id="branch_code" name="branch_code" type="text" class="form-control"
                                                   placeholder="门店编号">↵
                    </div>
                    ↵
                </div>
                ↵
                <div id="div_branch_id" class="form-group" style="display: none">↵ <label
                        class="col-sm-3 control-label">门店id</label>↵
                    <div class="col-sm-8">↵ <input name="branch_id" type="text" class="form-control" placeholder="门店id">↵
                    </div>
                    ↵ <span class="star">*</span>↵
                </div>
                ↵
                <div class="form-group">↵
                    <div class="col-sm-offset-3 col-sm-9">↵ <input id="btn_tenant_search" data-value="2" type="button"
                                                                   class="btn btn-default" value="查询"/>↵
                    </div>
                    ↵
                </div>
                ↵
            </form>
            ↵
        </div>
        ↵
    </div>
    ↵
    <div class="col-sm-3">↵
        <div class="row">↵ <label class="col-sm-12">app版本信息查询</label>↵</div>
        ↵
        <div class="row">↵
            <form id="form_app_search" class="form-inline" role="form">↵
                <div class="form-group">↵ <label class="control-label">业态</label>↵ <select name="app_business"
                                                                                           class="form-control">↵
                    <option value="1">餐饮</option>
                    ↵
                    <option value="2">零售</option>
                    ↵ </select>↵
                </div>
                ↵
                <div class="form-group">↵ <label class="control-label">平台</label>↵ <select name="app_type"
                                                                                           class="form-control">↵ …
                    halign: "center",↵ align: "center",↵ valign: "middle",↵ sortable: false,↵ field: 'is_force_update',↵
                    title: '是否强制升级',↵ formatter: function (value) {↵ var _re = "未知";↵ if (value === 1) {↵ _re = "<span
                            style='color:red'>是</span>";↵ } else if (value === 0) {↵ _re = "否";↵ }↵ return _re;↵ }↵ },
                    {↵ halign: "center",↵ align: "center",↵ valign: "middle",↵ sortable: false,↵ field: 'app_notes',↵
                    title: '备注',↵ cellStyle: function cellStyle(value, row, index) {↵ return {↵ css: {↵ "max-width":
                    "300px"↵ }↵ };↵ }↵ }, {↵ halign: "center",↵ align: "center",↵ valign: "middle",↵ sortable: false,↵
                    field: 'app_create_at',↵ title: '上传时间',↵ formatter: function (value) {↵ return
                    moment(value).utcOffset(8).format("YYYY-MM-DD HH:ss:mm");↵ }↵ }, {↵ halign: "center",↵ align:
                    "center",↵ valign: "middle",↵ sortable: false,↵ field: 'app_create_by',↵ title: '上传人'↵ }];↵
                    mynode.bootStrap.height = $(window).height() - $tb_app.offset().top;↵ // 查询前销毁之前表格，清除之前输出内容↵
                    $tb_app.bootstrapTable('destroy').bootstrapTable(mynode.bootStrap);↵ });↵ //修改单个门店版本号↵
                    $btn_app_bind.click(function () {↵ //整理表单数据↵ var formData = new FormData($form_app_bind[0]);↵ var
                    exec_type = $(this).data("value");↵ formData.append("env_name", env_name);↵
                    formData.append("func_type", func_type);↵ formData.append("exec_type", exec_type);↵ var
                    arrselections = $tb_app.bootstrapTable('getSelections');↵ if (arrselections.length === 0) {↵
                    toastr.warning("请先选中修改门店");↵ return;↵ }↵ var _arr = _.pick(arrselections[0], "branch_id",
                    "partition_code");↵ for (var key in _arr) {↵ formData.append(key, _arr[key]);↵ }↵ var url =
                    "/tomcat/tenantSet/operatorTenantSet"↵ $.ajax({↵ url: url,↵ type: 'POST',↵ data: formData,↵ async:
                    true,↵ contentType: false,↵ processData: false,↵ success: function (data) {↵ var _obj =
                    JSON.parse(data);↵ if (_obj.status === "success") {↵ toastr.info(_obj.data);↵ } else {↵
                    toastr.warning(_obj.msg);↵ }↵ },↵ error: function (data) {↵ toastr.warning('内部服务器错误');↵ },↵
                    complete: function () {↵ $btn_tenant_search.click();↵ }↵ });↵ });↵ //清除单个门店版本号↵
                    $btn_app_unbind.click(function () {↵ //整理表单数据↵ var formData = new FormData();↵ var exec_type =
                    $(this).data("value");↵ formData.append("env_name", env_name);↵ formData.append("func_type",
                    func_type);↵ formData.append("exec_type", exec_type);↵ var arrselections =
                    $tb_app.bootstrapTable('getSelections');↵ if (arrselections.length === 0) {↵
                    toastr.warning("请先选中修改门店");↵ return;↵ }↵ var _arr = _.pick(arrselections[0], "branch_id",
                    "partition_code");↵ for (var key in _arr) {↵ formData.append(key, _arr[key]);↵ }↵ var url =
                    "/tomcat/tenantSet/operatorTenantSet"↵ $.ajax({↵ url: url,↵ type: 'POST',↵ data: formData,↵ async:
                    true,↵ contentType: false,↵ processData: false,↵ success: function (data) {↵ var _obj =
                    JSON.parse(data);↵ if (_obj.status === "success") {↵ toastr.info(_obj.data);↵ } else {↵
                    toastr.warning(_obj.msg);↵ }↵ },↵ error: function (data) {↵ toastr.warning('内部服务器错误');↵ },↵
                    complete: function () {↵ $btn_tenant_search.click();↵ }↵ });↵ });↵
                    //----------------------END-------------------------------------↵ });↵</script>